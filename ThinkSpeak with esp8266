#include <ESP8266WiFi.h>
#include <ThingSpeak.h>
//WiFi
const char* ssid="******";
const char* password="******";

WiFiClient client;

//ThingSpeak
unsigned long myChannelNumber=1;
const char* myWriteAPIKey="******";

//Time variables
unsigned long lasttime=0;
unsigned long timerDelay=30000; //publishinig readings every 30s

void setup(){
  Serial.begin(115200);
  //Set the ESP8266 as a WiFi station
  WiFi.mode(WIFI_STA);
  //Initialize ThingSpeak
  ThingSpeak.begin(client);
}

void loop(){
  //Connect or reconnect WiFi
  if(WiFi.status()!=WL_CONNECTED){
    Serial.print("Attempting to connect");
    while(WiFi.status()!=WL_CONNECTED){
      WiFi.begin(ssid,password);
      delay(5000);
     }
     Serial.println("\nConnected.");
    }
    
//Get a new reading
int photocellVal=analogRead(2);
Serial.print("阻值:");
Serial.println(photocellVal);
}

